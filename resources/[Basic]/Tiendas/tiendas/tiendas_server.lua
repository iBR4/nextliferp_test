buysshop = {
	["24/7"] = {
	{-27.940196990967, -89.615165710449, 1003.546875, int= 18, dim = 9, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-27.940196990967, -89.615165710449, 1003.546875, int= 18, dim = 8, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-27.940196990967, -89.615165710449, 1003.546875, int= 18, dim = 6, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 7, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 8, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 12, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 20, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 0, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 55, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 60, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 22, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 6, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	{-23.242370605469, -55.641002655029, 1003.546875, int= 6, dim = 13, items={"Telefono", "Agenda","Radio","Parlante", "Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua"}},
	--
	{-30.561338424683, -28.993001937866, 1003.5572509766, int= 4, dim = 5, items={"Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua", "Bidon Vacio","Kit Herramientas","gato","Localizador"}},
	{-30.561338424683, -28.993001937866, 1003.5572509766, int= 4, dim = 10, items={"Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua", "Bidon Vacio","Kit Herramientas","gato","Localizador"}},
	{-30.561338424683, -28.993001937866, 1003.5572509766, int= 4, dim = 6, items={"Lata de Spray", "Caja de Cigarros", "Encendedor", "Camara", "Cerveza", "Agua", "Bidon Vacio","Kit Herramientas","gato","Localizador"}},
	},
	["Bebidas"] = {
	{-2654.0190429688, 1413.6501464844, 906.27709960938, int= 3, dim = 0, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	{497.33801269531, -75.859100341797, 998.7578125, int= 11, dim = 0, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	{499.79028320313, -20.544431686401, 1000.6796875, int= 17, dim = 0, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	{499.79028320313, -20.544431686401, 1000.6796875, int= 17, dim = 1, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	{-224.78340148926, 1404.3884277344, 27.7734375, int= 18, dim = 0, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	{499.9677734375, -20.5009765625, 1000.6796875, int= 17, dim = 5, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	{-224.9501953125, 1404.416015625, 27.7734375, int= 18, dim = 1, items={"Cerveza", "Agua", "Caja de Cigarros", "Encendedor"}},
	},
	["Burger"] = {
	{377.26641845703, -67.437118530273, 1001.5078125, int= 10, dim = 3, items={"Hamburguesa", "Hamburguesa Chica", "Hamburguesa Grande"}},
	{377.26641845703, -67.437118530273, 1001.5078125, int= 10, dim = 2, items={"Hamburguesa", "Hamburguesa Chica", "Hamburguesa Grande"}},
	{377.26641845703, -67.437118530273, 1001.5078125, int= 10, dim = 1, items={"Hamburguesa", "Hamburguesa Chica", "Hamburguesa Grande"}},
	{377.26641845703, -67.437118530273, 1001.5078125, int= 10, dim = 0, items={"Hamburguesa", "Hamburguesa Chica", "Hamburguesa Grande"}},
	},
	["Cluckin' Bell"] = {
	{369.76181030273, -6.0199885368347, 1001.8588867188, int= 9, dim = 0, items={"Pata de Pollo", "Hamb. de Pollo", "Pollo Asado"}},
	{369.76181030273, -6.0199885368347, 1001.8588867188, int= 9, dim = 1, items={"Pata de Pollo", "Hamb. de Pollo", "Pollo Asado"}},
	{369.76181030273, -6.0199885368347, 1001.8588867188, int= 9, dim = 2, items={"Pata de Pollo", "Hamb. de Pollo", "Pollo Asado"}},
	},
	["Pizza"] = {
	{375.72564697266, -118.80428314209, 1001.4995117188, int= 5, dim = 0, items={"Pizzeta", "Pizza Chica", "Pizza Grande"}},
	{375.72564697266, -118.80428314209, 1001.4995117188, int= 5, dim = 1, items={"Pizzeta", "Pizza Chica", "Pizza Grande"}},
	},
	["Restuarante"] ={
	{378.79110717773, -190.54232788086, 1000.6328125, int= 17, dim = 0, items={"Pata de Pollo", "Hamb. de Pollo", "Pollo Asado", "Agua"}},
	{378.79110717773, -190.54232788086, 1000.6328125, int= 17, dim = 1, items={"Pata de Pollo", "Hamb. de Pollo", "Pollo Asado", "Agua"}},
	},
	["Mesero"] ={
	{450.51531982422, -84.056312561035, 999.5546875, int= 4, dim = 0, items={"Paella"}},
	},

	["Pescador"] ={
	--{450.29095458984, -80.836807250977, 999.5546875, int=4, dim = 0, items={"Caña de pescar", "Cebo"}},
	}

}

addEventHandler("onResourceStart", resourceRoot, function()
	for index, valores in pairs(buysshop) do
		for _, v in ipairs(valores) do
			--
			p = Pickup(v[1], v[2], v[3], 3, 1274, 0 )
			p:setData("pickup.infoshops", index)
			p:setInterior(v.int)
			p:setDimension(v.dim)
			p:setData("pickup.tableinfo", v.items)
			--
			addEventHandler("onPickupHit", p, function(hitElement)
				if hitElement:getType() == "player" then
					if not hitElement:isInVehicle() then
						bindKey ( hitElement, "F", "down", OpenWindowFoods )
						--addCommandHandler("comprar", OpenWindowFoods)
						hitElement:setData("PickupData", source)
					end
				end
			end)
			addEventHandler("onPickupLeave", p, function(hitElement)
				if hitElement:getType() == "player" then
					if not hitElement:isInVehicle() then
						unbindKey ( hitElement, "F", "down", OpenWindowFoods )
						hitElement:setData("PickupData", nil)
					end
				end
			end)
		end
	end
end)	




addEvent("BuyItem", true)
addEventHandler("BuyItem", root, function(item, costo)
	if source:getMoney() >= tonumber(costo) then -- or item == "Agenda" or item == "Cámara" or item == "Cuchillo de Caza (Arma)" or item == "Lata de Spray" or item == "Caja de Cigarros" or item == "Encendedor"
		local account = source:getAccount()
		if item == "Telefono" then
			if source:getData("Roleplay:Telefono") == "No" then
				local numero = math.random(50000, 90000)
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* ha comprado un Telefono con el Número: #FF0000"..tonumber(numero).."#ffffff por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				source:setData("Roleplay:NumeroTelefono", tonumber(numero))
				account:setData("Roleplay:NumeroTelefono", tonumber(numero))
				source:setData("Roleplay:Telefono", "Si")
				account:setData("Roleplay:Telefono", "Si")
				source:takeMoney(tonumber(costo))--
			else
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes un telefono..", 150, 0, 0)
			end
		elseif item == "Agenda" then --
			if source:getData("Roleplay:Agenda") == "No" then
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* ha comprado una Agenda por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				exports['Notificaciones']:setTextNoti(source,"/agenda", 0, 150, 0, true)
				source:setData("Roleplay:Agenda", "Si")
				account:setData("Roleplay:Agenda", "Si")
				source:takeMoney(tonumber(costo))
			else
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes una agenda..", 150, 0, 0)
			end
		elseif item == "Lata de Spray" then
			if source:getWeapon() == 41 then
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes una Lata de Spray en mano.", 150, 0, 0, true)
			else
			exports['Notificaciones']:setTextNoti(source,"* ha comprado una Lata de Spray por: #009B00$"..costo.." dolares", 255, 255, 255, true)
			source:takeMoney(tonumber(costo))
			source:giveWeapon(41, 150, true)
		end
		elseif item == "Radio" then --
			if getPlayerItem(source,"Radio") ~= 1 then
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* ha comprado una radio por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				exports['Notificaciones']:setTextNoti(source,"/hz /r", 0, 150, 0, true)
				setPlayerItem(source,"Radio",1)
				source:takeMoney(tonumber(costo))			
			else
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes una radio.", 150, 0, 0)
			end
		elseif item == "Parlante" then --
			if getPlayerItem(source,"Parlante") ~= 1 then
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* Compraste un parlante por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				exports['Notificaciones']:setTextNoti(source,"/parlante /musica /tirarparlante /tomarparlante", 0, 150, 0, true)
				setPlayerItem(source,"Parlante",1)
				source:takeMoney(tonumber(costo))			
			else
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes un Parlante.", 150, 0, 0)
			end
		elseif item == "Caña de pescar" then --
				if source:getData("Roleplay:Caña",true) then	
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes una caña.", 150, 0, 0)
				else
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* ha comprado una caña por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				exports['Notificaciones']:setTextNoti(source,"/pescar", 0, 150, 0, true)
				source:setData("Roleplay:Caña", true)
				account:setData("Roleplay:Caña", true)
				source:takeMoney(tonumber(costo))
				setPlayerItem(source, "Caña de pescar", getPlayerItem(source, "Caña de pescar")+1)
			end

		elseif item == "Cuchillo de Caza (Arma)" then
			if source:getWeapon() == 4 then
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes un cuchillo en mano.", 150, 0, 0, true)
			else
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* ha comprado un Cuchillo por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				source:giveWeapon(4, 1, true)
				source:takeMoney(tonumber(costo))
			end
		elseif item == "Camara" then
			if source:getWeapon() == 43 then
				exports['Notificaciones']:setTextNoti(source,"* Ya tienes una camara en mano.", 150, 0, 0, true)
			else
				outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
				exports['Notificaciones']:setTextNoti(source,"* ha comprado una Camara por: #009B00$"..costo.." dolares", 255, 255, 255, true)
				source:giveWeapon(43, 10, true)
				source:takeMoney(tonumber(costo))
			end
		else
			outputDebugString('El jugador '..source.name..' Compro ['..item..']', 0, 0, 130, 232 )
			if item == "Caja de Cigarros" then
				setPlayerItem(source, item, getPlayerItem(source, item)+20)
			elseif item == "Encendedor" then
				setPlayerItem(source, item, getPlayerItem(source, item)+10)
			elseif item == "Cebo" then
				 setPlayerItem(source, item, getPlayerItem(source, item)+10)
			elseif item == "Localizador" then
				setPlayerItem(source, item, getPlayerItem(source, item)+1)
				outputChatBox("#F06C6C[OOC] #ffffffPuedes usar este localizador con /localizarveh.", source, 0,0,0, true)
			elseif item == "Kit Herramientas" then
				setElementData(source, "mecanico:KitHerramientas", true)
				setElementData(source, "mecanico:KitHerramientasViejo", true)
				outputChatBox("#F06C6C[OOC] #ffffffSi te desconectas perderás este Kit de herramientas.", source, 0,0,0, true)
				outputChatBox("#44A5CASyntax: #FFFFFF/usar kit", source, 255, 255, 255, true)
			elseif item == "gato" then
				setElementData(source, "mecanico:Gato", true)
				setElementData(source, "mecanico:GatoViejo", true)
				outputChatBox("#F06C6C[OOC] #ffffffSi te desconectas perderás este gato.", source, 0,0,0, true)
				outputChatBox("#44A5CASyntax: #FFFFFF/usar gato", source, 255, 255, 255, true)
			else
				setPlayerItem(source, item, getPlayerItem(source, item)+1)
			end
			exports['Notificaciones']:setTextNoti(source,"* ha comprado un/a #EE0000"..item.." #FFFFFFpor:#009B00 $"..costo.." dolares", 255, 255, 255, true)
			outputChatBox("Has comprado un #FFFF00"..item.." #FFFFFFpor #9CFF97$"..costo.." dólares#ffffff.", source, 255, 255, 255, true)
			source:takeMoney(tonumber(costo))
		end
	else
		exports['Notificaciones']:setTextNoti(source,"* No tienes suficiente dinero para comprar un/a "..item.."", 150, 0, 0)
	end
end)

function OpenWindowFoods( source )
	if not source:isInVehicle() then
		local coldat = source:getData("PickupData")
		if isElement( coldat ) then
			local infos = coldat:getData("pickup.tableinfo")
			source:triggerEvent("Comidas:setWindow", source, infos)
		end
		--unbindKey(source, "F", "down", OpenWindowFoods)
	end
end

addCommandHandler("usar", function(player, cmd, objeto)
		if objeto and string.lower(objeto) == "kit" then
			if isPedInVehicle( player ) then
				if getElementData(player, "mecanico:KitHerramientas") then
					local vehiculo = getPedOccupiedVehicle( player )
					if vehiculo then
					fixVehicle(vehiculo)
						if (getElementData(vehiculo, "Impounded") == 0) then
							exports.anticheat:changeProtectedElementDataEx(vehiculo, "enginebroke", 0, false)
							if armoredCars[ getElementModel( vehiculo ) ] then
								setVehicleDamageProof(vehiculo, true)
							else
								setVehicleDamageProof(vehiculo, false)
							end
						end
						outputChatBox("#9CFF97Con ayuda de tus herramientas has logrado reparar un poco los daños de tu auto.", player, 0,0,0, true)
						removeElementData( player, "mecanico:KitHerramientas" )
					end
				end
			end
		elseif objeto and string.lower(objeto) == "gato" then
			if isPedInVehicle( player ) then
				if getElementData(player, "mecanico:Gato") then
					local vehiculo = getPedOccupiedVehicle( player )
					if vehiculo then
						local rx, ry, rz = getElementRotation( vehiculo )
						setElementRotation( vehiculo, rx, ry-180, rz )
						outputChatBox("#9CFF97Con ayuda de tu gato has logrado girar tu auto.", player, 0,0,0, true)
						removeElementData( player, "mecanico:Gato" )
					end
				end
			end
		end
end)